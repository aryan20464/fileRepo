spec:
  serviceAccountName: default
  securityContext:
    runAsNonRoot: true
    runAsUser: 1000
    fsGroup: 1000
    seccompProfile:
      type: RuntimeDefault
  containers:
    - name: alloy
      image: tkgsharedharbor.corp.ad.sbi/itss/grafana-alloy:1.11.0
      args: ["run", "/etc/alloy/config.alloy"]
      volumeMounts:
        - name: alloy-config
          mountPath: /etc/alloy
        - name: alloy-data
          mountPath: /alloy/data
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop: ["ALL"]
  volumes:
    - name: alloy-config
      configMap:
        name: alloy-config
    - name: alloy-data
      emptyDir: {}
